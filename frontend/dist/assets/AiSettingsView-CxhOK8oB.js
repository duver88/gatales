import{l as j,K as _,c as i,a as t,t as d,d as x,b as A,F as I,y as N,i as E,e as M,v as B,r,q as P,o as n,C as T,h as L,N as U,O as u}from"./index-DnaU9Zpc.js";const q={class:"p-6"},F={class:"flex justify-between items-center mb-6"},O=["disabled"],R={key:0,class:"bg-red-500/20 text-red-400 p-4 rounded-lg mb-6"},D={key:1,class:"bg-green-500/20 text-green-400 p-4 rounded-lg mb-6"},G={key:2,class:"text-gatales-text-secondary"},z={key:3,class:"space-y-6"},H={key:0,class:"card"},K={class:"space-y-4"},J={class:"card"},Q={class:"space-y-4"},W=["disabled"],X={key:0,class:"mt-4 p-4 bg-gatales-input rounded-lg"},Y={class:"flex justify-between items-start mb-2"},Z={class:"text-xs text-gatales-text-secondary"},$={class:"text-gatales-text whitespace-pre-wrap"},se={__name:"AiSettingsView",setup(ee){const h=U({props:{setting:{type:Object,required:!0}},emits:["update"],setup(s,{emit:e}){const l=a=>{e("update",s.setting.key,a)};return()=>{const{setting:a}=s;return a.type==="string"?u("div",[u("label",{class:"block text-sm font-medium text-gatales-text mb-1"},a.label),u("input",{type:"text",value:a.value,onInput:k=>l(k.target.value),class:"input-field",placeholder:a.description}),u("p",{class:"text-xs text-gatales-text-secondary mt-1"},a.description)]):u("div",[u("label",{class:"block text-sm font-medium text-gatales-text mb-1"},a.label),u("input",{type:"text",value:a.value,onInput:k=>l(k.target.value),class:"input-field"}),u("p",{class:"text-xs text-gatales-text-secondary mt-1"},a.description)])}}}),b=r([]),f=r(!0),p=r(!1),g=r(!1),o=r(null),v=r(null),m=r("Crea un hook corto para un video sobre productividad"),c=r(null),y=P(()=>b.value.filter(s=>s.key==="supervision_email"));j(async()=>{await S()});async function S(){f.value=!0,o.value=null;try{const s=await _.getAiSettings();b.value=s.data.settings}catch{o.value="Error al cargar la configuracion"}finally{f.value=!1}}async function w(){p.value=!0,o.value=null,v.value=null;try{const s=y.value.map(e=>({key:e.key,value:e.value}));await _.updateAiSettings(s),v.value="Configuracion guardada correctamente",setTimeout(()=>{v.value=null},3e3)}catch(s){o.value=s.response?.data?.message||"Error al guardar"}finally{p.value=!1}}async function C(){g.value=!0,c.value=null,o.value=null;try{const s=await _.testAiSettings(m.value);c.value=s.data}catch(s){o.value=s.response?.data?.message||"Error al probar la configuracion"}finally{g.value=!1}}function V(s,e){const l=b.value.find(a=>a.key===s);l&&(l.value=e)}return(s,e)=>(n(),i("div",q,[t("div",F,[e[1]||(e[1]=t("h1",{class:"text-2xl font-bold text-gatales-text"},"Configuracion",-1)),t("button",{onClick:w,disabled:p.value,class:"btn-primary"},d(p.value?"Guardando...":"Guardar Cambios"),9,O)]),o.value?(n(),i("div",R,d(o.value),1)):x("",!0),v.value?(n(),i("div",D,d(v.value),1)):x("",!0),f.value?(n(),i("div",G,"Cargando...")):(n(),i("div",z,[y.value.length?(n(),i("div",H,[e[2]||(e[2]=A('<div class="flex items-center gap-2 mb-4"><svg class="w-5 h-5 text-gatales-accent" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"></path></svg><h2 class="text-lg font-semibold text-gatales-text">Supervision de Correos</h2></div><p class="text-sm text-gatales-text-secondary mb-4"> Configura un email de supervision para recibir una copia de todos los correos enviados por la aplicacion. Util para verificar que los emails se envian correctamente. </p>',2)),t("div",K,[(n(!0),i(I,null,N(y.value,l=>(n(),T(L(h),{key:l.key,setting:l,onUpdate:V},null,8,["setting"]))),128))]),e[3]||(e[3]=t("div",{class:"mt-4 p-3 bg-yellow-500/10 border border-yellow-500/30 rounded-lg"},[t("p",{class:"text-xs text-yellow-400"},[t("strong",null,"Nota:"),E(" Los correos de supervision se envian como copia con el prefijo [SUPERVISION] en el asunto. Incluyen informacion del destinatario original. ")])],-1))])):x("",!0),t("div",J,[e[6]||(e[6]=t("h2",{class:"text-lg font-semibold text-gatales-text mb-4"},"Probar Configuracion IA",-1)),e[7]||(e[7]=t("p",{class:"text-sm text-gatales-text-secondary mb-4"}," Prueba la configuracion actual del asistente enviando un mensaje de prueba. ",-1)),t("div",Q,[t("div",null,[e[4]||(e[4]=t("label",{class:"block text-sm font-medium text-gatales-text mb-1"}," Mensaje de prueba ",-1)),M(t("input",{"onUpdate:modelValue":e[0]||(e[0]=l=>m.value=l),type:"text",class:"input-field",placeholder:"Escribe un mensaje de prueba..."},null,512),[[B,m.value]])]),t("button",{onClick:C,disabled:g.value||!m.value,class:"btn-secondary"},d(g.value?"Probando...":"Probar IA"),9,W),c.value?(n(),i("div",X,[t("div",Y,[e[5]||(e[5]=t("span",{class:"text-sm font-medium text-gatales-accent"},"Respuesta:",-1)),t("span",Z,d(c.value.tokens_used)+" tokens | "+d(c.value.model),1)]),t("p",$,d(c.value.response),1)])):x("",!0)])])]))]))}};export{se as default};
