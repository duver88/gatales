import{u as w,l as g,c as r,a as t,b as h,w as y,t as k,d as L,e as m,v as p,h as x,m as M,r as l,k as _,o as i}from"./index-DdZd5_5M.js";const C={class:"min-h-dvh flex items-center justify-center bg-gatales-bg px-4 py-8 safe-area-inset"},S={class:"w-full max-w-sm sm:max-w-md"},V={class:"card"},B={key:0,class:"bg-red-500/10 border border-red-500/50 text-red-400 px-3 sm:px-4 py-3 rounded-lg text-sm"},E=["disabled"],N={key:0},q={key:1},Z={__name:"SetPasswordView",setup(P){const v=_(),b=M(),d=w(),a=l(""),o=l(""),s=l(""),n=l("");g(()=>{n.value=b.query.token||"",n.value||(s.value="El enlace no es v치lido. Por favor verifica el link en tu email.")});async function f(){if(s.value="",a.value!==o.value){s.value="Las contrase침as no coinciden";return}if(a.value.length<8){s.value="La contrase침a debe tener al menos 8 caracteres";return}try{await d.setPassword(n.value,a.value,o.value),v.push("/chat")}catch(c){s.value=c.response?.data?.message||"Error al establecer la contrase침a"}}return(c,e)=>(i(),r("div",C,[t("div",S,[e[6]||(e[6]=h('<div class="text-center mb-6 sm:mb-8"><div class="w-16 h-16 bg-gatales-accent rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-gatales-accent/30"><svg class="w-10 h-10 text-white" viewBox="0 0 100 100" fill="currentColor"><path d="M50 15 L25 35 L25 60 Q25 80 50 85 Q75 80 75 60 L75 35 Z"></path><path d="M25 35 L15 10 L35 30 Z"></path><path d="M75 35 L85 10 L65 30 Z"></path></svg></div><h1 class="text-3xl sm:text-4xl font-bold text-gatales-accent">El Cursales</h1><p class="text-sm sm:text-base text-gatales-text-secondary mt-2">Tu asistente de guiones de video</p></div>',1)),t("div",V,[e[4]||(e[4]=t("h2",{class:"text-lg sm:text-xl font-semibold text-gatales-text mb-2 text-center"}," Bienvenido! ",-1)),e[5]||(e[5]=t("p",{class:"text-sm sm:text-base text-gatales-text-secondary text-center mb-5 sm:mb-6"}," Establece tu contrasena para comenzar ",-1)),t("form",{onSubmit:y(f,["prevent"]),class:"space-y-4"},[s.value?(i(),r("div",B,k(s.value),1)):L("",!0),t("div",null,[e[2]||(e[2]=t("label",{for:"password",class:"block text-sm font-medium text-gatales-text-secondary mb-1"}," Nueva contrasena ",-1)),m(t("input",{id:"password","onUpdate:modelValue":e[0]||(e[0]=u=>a.value=u),type:"password",required:"",minlength:"8",autocomplete:"new-password",class:"input-field text-base",placeholder:"Minimo 8 caracteres"},null,512),[[p,a.value]])]),t("div",null,[e[3]||(e[3]=t("label",{for:"passwordConfirmation",class:"block text-sm font-medium text-gatales-text-secondary mb-1"}," Confirmar contrasena ",-1)),m(t("input",{id:"passwordConfirmation","onUpdate:modelValue":e[1]||(e[1]=u=>o.value=u),type:"password",required:"",minlength:"8",autocomplete:"new-password",class:"input-field text-base",placeholder:"Repite tu contrasena"},null,512),[[p,o.value]])]),t("button",{type:"submit",disabled:x(d).isLoading||!n.value,class:"btn-primary w-full mt-6 py-3 text-base active:scale-[0.98] transition-transform"},[x(d).isLoading?(i(),r("span",N,"Guardando...")):(i(),r("span",q,"Guardar y continuar"))],8,E)],32)])])]))}};export{Z as default};
