import{u as w,l as h,c as r,a as t,b as y,w as k,t as _,d as L,e as m,v as p,h as x,f as C,g as V,m as M,r as l,j as N,k as S,o as i,i as B}from"./index-DdZd5_5M.js";const E={class:"min-h-dvh flex items-center justify-center bg-gatales-bg px-4 py-8 safe-area-inset"},R={class:"w-full max-w-sm sm:max-w-md"},j={class:"card"},q={key:0,class:"bg-red-500/10 border border-red-500/50 text-red-400 px-3 sm:px-4 py-3 rounded-lg text-sm"},P=["disabled"],T={key:0},Z={key:1},D={class:"mt-5 sm:mt-6 text-center text-sm text-gatales-text-secondary"},U={__name:"ResetPasswordView",setup(G){const v=S(),f=M(),d=w(),a=l(""),o=l(""),s=l(""),n=l("");h(()=>{n.value=f.query.token||"",n.value||(s.value="El enlace no es valido. Por favor verifica el link en tu email.")});async function b(){if(s.value="",a.value!==o.value){s.value="Las contrasenas no coinciden";return}if(a.value.length<8){s.value="La contrasena debe tener al menos 8 caracteres";return}try{await d.resetPassword(n.value,a.value,o.value),v.push("/chat")}catch(c){s.value=c.response?.data?.message||"Error al restablecer la contrasena"}}return(c,e)=>{const g=N("router-link");return i(),r("div",E,[t("div",R,[e[7]||(e[7]=y('<div class="text-center mb-6 sm:mb-8"><div class="w-16 h-16 bg-gatales-accent rounded-2xl flex items-center justify-center mx-auto mb-4 shadow-lg shadow-gatales-accent/30"><svg class="w-10 h-10 text-white" viewBox="0 0 100 100" fill="currentColor"><path d="M50 15 L25 35 L25 60 Q25 80 50 85 Q75 80 75 60 L75 35 Z"></path><path d="M25 35 L15 10 L35 30 Z"></path><path d="M75 35 L85 10 L65 30 Z"></path></svg></div><h1 class="text-3xl sm:text-4xl font-bold text-gatales-accent">El Cursales</h1><p class="text-sm sm:text-base text-gatales-text-secondary mt-2">Tu asistente de guiones de video</p></div>',1)),t("div",j,[e[5]||(e[5]=t("h2",{class:"text-lg sm:text-xl font-semibold text-gatales-text mb-2 text-center"}," Nueva contrasena ",-1)),e[6]||(e[6]=t("p",{class:"text-sm sm:text-base text-gatales-text-secondary text-center mb-5 sm:mb-6"}," Ingresa tu nueva contrasena ",-1)),t("form",{onSubmit:k(b,["prevent"]),class:"space-y-4"},[s.value?(i(),r("div",q,_(s.value),1)):L("",!0),t("div",null,[e[2]||(e[2]=t("label",{for:"password",class:"block text-sm font-medium text-gatales-text-secondary mb-1"}," Nueva contrasena ",-1)),m(t("input",{id:"password","onUpdate:modelValue":e[0]||(e[0]=u=>a.value=u),type:"password",required:"",minlength:"8",autocomplete:"new-password",class:"input-field text-base",placeholder:"Minimo 8 caracteres"},null,512),[[p,a.value]])]),t("div",null,[e[3]||(e[3]=t("label",{for:"passwordConfirmation",class:"block text-sm font-medium text-gatales-text-secondary mb-1"}," Confirmar contrasena ",-1)),m(t("input",{id:"passwordConfirmation","onUpdate:modelValue":e[1]||(e[1]=u=>o.value=u),type:"password",required:"",minlength:"8",autocomplete:"new-password",class:"input-field text-base",placeholder:"Repite tu contrasena"},null,512),[[p,o.value]])]),t("button",{type:"submit",disabled:x(d).isLoading||!n.value,class:"btn-primary w-full mt-6 py-3 text-base active:scale-[0.98] transition-transform"},[x(d).isLoading?(i(),r("span",T,"Guardando...")):(i(),r("span",Z,"Guardar nueva contrasena"))],8,P)],32),t("p",D,[C(g,{to:"/login",class:"text-gatales-accent hover:underline active:opacity-80"},{default:V(()=>[...e[4]||(e[4]=[B(" Volver al inicio de sesion ",-1)])]),_:1})])])])])}}};export{U as default};
